{{ template "header" . }}

{{ $beta := .Beta }}

<main>
    <h1>Recent Solutions</h1>

    <details class=nav>
        {{ $langID := .Data.LangID }}

        {{ if eq $langID "all-langs" }}
            <summary>All Langs</summary>
        {{ else }}
            <a href="/recent/all-langs">All Langs</a>
        {{ end }}

        {{ range .Data.Langs }}
            {{ if eq $langID .ID }}
                <summary>{{ .Name }}</summary>
            {{ else }}
                <a href="/recent/{{ .ID }}">{{ .Name }}</a>
            {{ end }}
        {{ end }}
    </details>

    <table class="nowrap-first-second sticky">
        <thead>
            <tr>
                <th>Hole
                <th>Golfer
                <th class=wide>Lang
                {{ if .Beta }}
                    <th class="right wide">Strokes
                    <th class="wide">Scoring
                {{ else }}
                    <th class="right wide">Bytes
                    <th class="right wide">Chars
                {{ end }}
                <th class=wide>
                <th class=right>Submitted
        <tbody>
        {{ $name := "" }}
        {{ with .Golfer }}{{ $name = .Name }}{{ end }}

        {{- range .Data.Recents -}}
            <tr{{ if eq $name .Login }} class="me"{{ end }}>
                <td>
                    <a href="/{{ .Hole.ID }}#{{ .Lang.ID }}">
                        <span>{{ .Hole.Name }}</span>
                    </a>
                <td>
                    <a href="/golfers/{{ .Login }}">
                        <img loading=lazy src="//avatars.githubusercontent.com/{{ .Login }}?s=24">
                        <span>{{- .Login -}}</span>
                    </a>
                <td class=wide>
                    <a href="/recent/{{ .Lang.ID }}">{{ .Lang.Name }}</a>
                {{ if $beta }}
                {{ if eq .OtherRank 0 }}
                    <td class="right wide" data-tooltip="Rank: {{ .Rank }}{{ ord .Rank }}">
                {{ else }}
                    <td class="right wide" data-tooltip="Bytes rank is {{ .Rank }}{{ ord .Rank }}. Chars rank is {{ .OtherRank }}{{ ord .OtherRank }}.">
                {{ end }}
                    {{ comma .Strokes }}
                    <td class="wide">{{ .Scoring }}
                {{ else }}
                    <td class="right wide">{{ comma .Bytes }}
                    <td class="right wide" data-tooltip="Rank: {{ .Rank }}{{ ord .Rank }}">
                        {{ comma .Chars }}
                {{ end }}
                <td class=wide
                    {{ if not .TieCount }}
                        data-tooltip="Shorter than previous {{ .Rank }}{{ ord .Rank }} place solutions"
                    {{ end }}>
                    {{if eq .Rank 1}}ðŸ¥‡
                    {{else if eq .Rank 2}}ðŸ¥ˆ
                    {{else if eq .Rank 3}}ðŸ¥‰
                    {{end}}
                    {{if and (not .TieCount) (le .Rank 3)}}ðŸ“‰{{end}}
                <td class=right>{{ time .Submitted }}
        {{- end -}}
    </table>
</main>

{{ template "footer" }}
